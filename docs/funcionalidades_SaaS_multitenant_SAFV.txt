# Funcionalidades SaaS Multi‑Tenant — Labs4Ideas (Owner Tenant)

> Escopo: este documento apresenta as funcionalidades administrativas e de plataforma que o **SaaS multi‑tenant** da **Labs4Ideas** deve oferecer. O foco é um MVP simples, funcional e escalável, cobrindo apenas o essencial para operação, gestão e segurança da aplicação.

---

## A. Governança de Tenants

### Gerenciamento Global

* **Controle de versões** do sistema com histórico e rollback.
* **Parametrizações globais** (limites, índices base, políticas regionais).
* **Feature flags em massa**, permitindo habilitar/desabilitar recursos por grupo de tenants.

### Provisionamento e Ciclo de Vida

* **Criação de tenants exclusiva da Labs4Ideas** (Superadmin ou Suporte).
* Cada tenant requer obrigatoriamente:

  * Uma **empresa vinculada** (1:1 no MVP).
  * Um **TenantAdmin** associado.
* Funções básicas: ativar, suspender e excluir tenant (soft delete com retenção).
* **Planos e limites** (usuários, chamadas API).
* **Suspensão automática** por falta de pagamento.

### Isolamento

* **Shared DB + Shared Schema**, com isolamento lógico via **TenantID** e **Row‑Level Security (RLS)**.
* **Índices e chaves compostas** por `tenant_id`.
* **TLS/HTTPS + JWT** (sem criptografia em repouso no MVP).

---

## B. Identidade e Acesso

* **Perfis:** Superadmin, Suporte, TenantAdmin, Usuário.
* **Login:** exclusivamente por **e‑mail e senha** (sem SSO/MFA no MVP).
* **Regra geral:** todos operam **um tenant por vez**, sempre com `tenant_id` explícito.
* **RBAC** básico (funções fixas; granularidade futura).
* **Sessões:** token JWT expira em 1 dia; sem políticas adicionais.
* **Gestão de credenciais de API:**

  * **Superadmin/TenantAdmin:** criar, rotacionar, revogar e visualizar.
  * **Suporte:** apenas visualizar.
  * **Usuário:** sem acesso.
* **Auditoria centralizada:** registro imutável de ações administrativas e acessos.

---

## C. Cobrança e Pagamentos (Fluxo Manual)

* **Cobrança manual:** todas as etapas ocorrem fora do sistema.
* O SaaS gera **períodos de cobrança** e exibe **painel de faturas e status**.
* **Labs4Ideas ou TenantAdmin** marca cobranças como **quitadas**, com **data de pagamento**.
* **Nenhum dado de cartão** é armazenado.
* **Superadmin/Suporte:**

  * Visualizam status de todos os tenants.
  * Podem **adiar bloqueios automáticos**, **marcar faturas como quitadas** ou **registrar ajustes**.
* **Bloqueio automático:** após X dias de atraso, reativação manual.
* **Política de cancelamento:**

  * Cancelamento no 1º mês → reembolso completo.
  * Após o 1º mês → paga o mês corrente e reembolso proporcional.

---

## D. Monitoramento, Logs e Suporte

* **Logs de auditoria centralizados** (eventos, ações, acessos).
* **Exportação de logs** para relatórios externos.
* **Alertas automáticos** (falhas, uso anômalo, erros de API, bloqueios).
* **Painel de monitoramento:** métricas básicas (tenants ativos, usuários, simulações, chamadas API, falhas).
* **Tickets de suporte:** integração Labs4Ideas ↔ tenants.
* **Base de conhecimento** e notificações in‑app.

---

## E. Dados e Segurança

* **LGPD básica:** consentimento, direito de exclusão e portabilidade.
* **Backups completos** com restore seletivo por `tenant_id`.
* **Retention policy:** 90 dias online + 12 meses arquivado.
* **TLS/HTTPS e JWT** obrigatórios.
* **Criptografia em repouso** e **BYOK** postergados.

---

## F. Integrações e APIs

* **APIs REST** por tenant com **API Key + Secret**.
* **Sem Webhooks no MVP.**
* **Ambientes:** apenas produção e desenvolvimento.
* **Importação de dados** via API do SaaS (sem upload direto de planilhas).

---

## G. Experiência do Usuário

* **Notificações por e‑mail** e alertas automáticos.
* **Preferências de usuário:** idioma, moeda, formatos e notificações.
* **Onboarding simples:** checklist e templates de exemplo.

---

## H. Administração Geral do Sistema

* **Gestão de usuários e planos.**
* **Logs e métricas** acessíveis pelo painel administrativo.
* **Alertas de uso e limites.**
* **Notificações automáticas** (falhas, bloqueios, versões).
* **Configurações globais:** idioma, moeda, timezone, limites padrão.

---

## I. Itens Futuramente Planejados

* Criptografia em repouso (KMS/BYOK).
* SSO e MFA.
* Webhooks.
* Pentest e bug bounty.
* Dashboard avançado de métricas e alertas.
* Integração com emissão de NF‑e.
* Multi‑empresa por tenant.

---

## J. Módulos Principais do SaaS (Funcionalidades de Negócio)

### 1. Simulação de Planos de Pagamento

* Cadastro e comparação de diferentes planos de pagamento.
* Aplicação de índices de correção (INCC, IGP‑M, CDI, SELIC) e combinações.
* Cálculo de Valor Presente (PV), Prazo Médio de Recebimento (PMR) e Valor Médio de Parcela (VMP).
* Geração de relatórios e gráficos comparativos.

### 2. Valoração de Carteira de Recebíveis

* Importação de dados históricos e estruturação de recebíveis futuros.
* Cálculo de Valor Presente Bruto (VPB) e Líquido (VPL).
* Simulação de perdas por inadimplência e cancelamento.
* Estimativa de preço de venda da carteira com base em taxa de desconto.

### 3. Benchmarking de Mercado

* Comparação anônima e agregada de indicadores entre clientes.
* Filtros por segmento, porte e região.
* Indicadores de mercado: inadimplência média, cancelamento, prazo e preço de venda de carteiras.

### 4. IA Preditiva e Recomendações

* Modelos de Machine Learning para previsão de inadimplência e cancelamento.
* Recomendações automáticas para otimizar planos e políticas comerciais.
* Painel de oportunidades e insights com simulações sugeridas.

---
